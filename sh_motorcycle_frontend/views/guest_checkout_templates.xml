<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Archivo: sh_motorcycle_backend/views/guest_checkout_templates.xml -->
    
    <!-- Template mÃ­nimo para debug info - visible para usuarios pÃºblicos -->
    <template id="address_guest_debug" inherit_id="website_sale.address" name="Biagioli Guest Debug">
        <!-- Agregar informaciÃ³n de debugging para usuarios guest/pÃºblicos -->
        <xpath expr="//form[@class='s_website_form']" position="before">
            <t t-if="biagioli_guest_debug and user_is_guest">
                <div class="alert alert-warning biagioli-debug mt-3">
                    <strong>ðŸ”§ BIAGIOLI DEBUG (Modo Guest):</strong><br/>
                    <small>
                        Usuario: <span t-esc="request.env.user.name"/><br/>
                        Es Guest: <span t-esc="user_is_guest"/><br/>
                        Order ID: <span t-esc="order.id if order else 'Sin orden'"/><br/>
                        Partner: <span t-esc="order.partner_id.name if order and order.partner_id else 'Sin partner'"/><br/>
                        URL: <span t-esc="request.httprequest.url"/>
                    </small>
                </div>
            </t>
        </xpath>
    </template>

    <!-- Debug adicional para el formulario -->
    <template id="address_form_debug" inherit_id="website_sale.address" name="Biagioli Form Debug">
        <!-- Agregar clase CSS para checkout page -->
        <xpath expr="//div[@id='wrap']" position="attributes">
            <attribute name="class" add="biagioli-checkout-page" separator=" "/>
        </xpath>
        
        <!-- Agregar atributos para debugging en el formulario -->
        <xpath expr="//form[@class='s_website_form']" position="attributes">
            <attribute name="data-biagioli-debug">true</attribute>
            <attribute name="data-user-guest" t-att-data-user-guest="user_is_guest"/>
        </xpath>
        
        <!-- Agregar debug al botÃ³n de submit -->
        <xpath expr="//button[@id='save_address']" position="attributes">
            <attribute name="data-biagioli-submit">guest-checkout</attribute>
        </xpath>
    </template>

</odoo>

</odoo>