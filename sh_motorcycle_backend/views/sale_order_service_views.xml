<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!-- Herencia de la vista formulario de Sale Order -->
    <record id="view_order_form_inherit_service_templates" model="ir.ui.view">
        <field name="name">sale.order.form.inherit.service.templates</field>
        <field name="model">sale.order</field>
        <field name="inherit_id" ref="sale.view_order_form"/>
        <field name="arch" type="xml">
            
            <!-- Agregar campo de plantilla de servicios después de payment_term_id -->
            <xpath expr="//field[@name='payment_term_id']" position="after">
                <field name="service_template_id" 
                       string="Plantilla de Servicios"
                       placeholder="Seleccionar Plantilla de Servicio..." 
                       options="{'no_create': True, 'no_open': True}"
                       readonly="state in ['cancel', 'sale']"/>
            </xpath>

            <!-- Agregar botón de borrar líneas en el control -->
            <xpath expr="//field[@name='order_line']//control" position="inside">
                <button name="action_clear_order_lines" 
                        string="🗑️ Borrar Todo" 
                        type="object" 
                        class="btn-danger btn-sm" 
                        confirm="¿Estás seguro de que quieres borrar todas las líneas?" 
                        invisible="state not in ['draft', 'sent']"/>
            </xpath>

        </field>
    </record>
</odoo>