<odoo>
  <!-- FORMULARIO DEL WIZARD -->
  <record id="view_motorcycle_technical_data_wizard_form" model="ir.ui.view">
    <field name="name">motorcycle.technical.data.wizard.form</field>
    <field name="model">motorcycle.technical.data.wizard</field>
    <field name="arch" type="xml">
      <form string="Cargar Datos Técnicos en lote">
        <group>
          <field name="category_id" options="{'no_create': True}"/>
          <field name="attribute_id"/>
          <field name="value_id"/>
          <field name="note"/>
           <field name="motorcycle_ids"
                 widget="many2many_tags"
                 domain="[('id','not in', used_moto_ids)]"
                 help="Sólo aparecen motos que no tengan aún este dato técnico."
          />
        </group>
        <footer>
          <button string="Aplicar" type="object" name="action_apply" class="btn-primary"/>
          <button string="Cancelar" special="cancel" class="btn-secondary"/>
        </footer>
      </form>
    </field>
  </record>

  <!-- ACCIÓN SERVER PARA VISTA EN “ACCIONES” DEL TREE DE technical.data -->
  <record id="action_server_motorcycle_technical_data_wizard" model="ir.actions.server">
  <field name="name">Cargar Datos Técnicos en lote</field>
  <!-- binding sobre datos técnicos -->
  <field name="binding_model_id" ref="sh_motorcycle_backend.model_motorcycle_technical_data"/>
  <field name="binding_type">action</field>
  <field name="binding_view_types">list</field>
  <field name="state">code</field>
  <field name="code"><![CDATA[
  action = {
      'type': 'ir.actions.act_window',
      'res_model': 'motorcycle.technical.data.wizard',
      'view_mode': 'form',
      'view_id': env.ref('sh_motorcycle_backend.view_motorcycle_technical_data_wizard_form').id,
      'target': 'new',
      'context': dict(
          default_motorcycle_ids=env['motorcycle.technical.data']
              .browse(env.context.get('active_ids', []))
              .mapped('motorcycle_id')
              .ids,
      ),
  }
  ]]></field>
  </record>


  <!-- ACCIÓN ACT_WINDOW PARA MENÚ -->
  <record id="action_wizard_motorcycle_technical_data" model="ir.actions.act_window">
    <field name="name">Cargar Datos Técnicos (lote)</field>
    <field name="res_model">motorcycle.technical.data.wizard</field>
    <field name="view_mode">form</field>
    <field name="view_id" ref="view_motorcycle_technical_data_wizard_form"/>
    <field name="target">new</field>
  </record>

  <!-- ITEM DE MENÚ BAJO “Datos Técnicos” -->
  <menuitem
    id="menu_motorcycle_technical_data_wizard"
    name="Cargar en lote"
    parent="menu_motorcycle_technical_data"
    action="action_wizard_motorcycle_technical_data"
    sequence="1"
    groups="sh_motorcycle_backend.group_sh_motorcycle_manager"
  />
</odoo>
